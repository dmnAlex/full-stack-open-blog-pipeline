(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(15),c=n.n(u),l=n(1),o=n.n(l),i=n(4),s=n(2),p=n(16),d=function(e){var t=e.blog,n=e.addLike,u=e.deleteBlog,c=e.isCreator,l=Object(a.useState)(!1),o=Object(s.a)(l,2),i=o[0],d=o[1],m={display:i?"":"none"},f={display:c?"":"none"};return r.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},className:"blog"},r.a.createElement("div",null,t.title," ",t.author," ",r.a.createElement("button",{onClick:function(){d(!i)}},i?"hide":"view")),r.a.createElement("div",{style:m,className:"togglableContent"},t.url," ",r.a.createElement("br",null),t.likes," ",r.a.createElement("button",{onClick:function(e){e.preventDefault();var a=Object(p.a)({},t,{likes:t.likes+1});n(a)}},"like")," ",r.a.createElement("br",null),t.user?t.user.name:null," ",r.a.createElement("br",null),r.a.createElement("button",{style:f,onClick:function(e){e.preventDefault(),window.confirm("Remove blog ".concat(t.title," by ").concat(t.author,"?"))&&u(t.id)}},"remove")))},m=function(e){var t=e.addBlog,n=Object(a.useState)(""),u=Object(s.a)(n,2),c=u[0],l=u[1],o=Object(a.useState)(""),i=Object(s.a)(o,2),p=i[0],d=i[1],m=Object(a.useState)(""),f=Object(s.a)(m,2),b=f[0],v=f[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"create new"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:c,author:p,url:b}),l(""),d(""),v("")}},r.a.createElement("div",null,"title:",r.a.createElement("input",{id:"title",type:"text",value:c,name:"Title",onChange:function(e){var t=e.target;return l(t.value)}})),r.a.createElement("div",null,"author:",r.a.createElement("input",{id:"author",type:"text",value:p,name:"Author",onChange:function(e){var t=e.target;return d(t.value)}})),r.a.createElement("div",null,"url:",r.a.createElement("input",{id:"url",type:"text",value:b,name:"Url",onChange:function(e){var t=e.target;return v(t.value)}})),r.a.createElement("button",{id:"create",type:"submit"},"create")))},f=function(e){var t=e.logIn,n=Object(a.useState)(""),u=Object(s.a)(n,2),c=u[0],l=u[1],p=Object(a.useState)(""),d=Object(s.a)(p,2),m=d[0],f=d[1],b=function(){var e=Object(i.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({username:c,password:m}),l(""),f("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",null,"login in to application"),r.a.createElement("form",{onSubmit:b},r.a.createElement("div",null,"username",r.a.createElement("input",{id:"username",type:"text",value:c,name:"Username",onChange:function(e){var t=e.target;return l(t.value)}})),r.a.createElement("div",null,"password",r.a.createElement("input",{id:"password",type:"password",value:m,name:"Password",onChange:function(e){var t=e.target;return f(t.value)}})),r.a.createElement("button",{id:"login-button",type:"submit"},"login")))},b=function(e){var t=e.message,n={color:e.color,fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return null===t?null:r.a.createElement("div",{className:"error",style:n},t)},v=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),u=n[0],c=n[1],l={display:u?"none":""},o={display:u?"":"none"},i=function(){c(!u)};return r.a.createElement("div",null,r.a.createElement("div",{style:l},r.a.createElement("button",{onClick:i},e.buttonLabel1)),r.a.createElement("div",{style:o},e.children,r.a.createElement("button",{onClick:i},e.buttonLabel2)))},g=n(5),h=n.n(g),E=null,w={getAll:function(){return h.a.get("/api/blogs").then((function(e){return e.data}))},create:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,h.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,h.a.put("/api/blogs/"+t.id,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,h.a.delete("/api/blogs/"+t,n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){E="bearer ".concat(e)}},k={login:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(null),l=Object(s.a)(c,2),p=l[0],g=l[1],h=Object(a.useState)(null),E=Object(s.a)(h,2),O=E[0],j=E[1],y=Object(a.useState)("red"),x=Object(s.a)(y,2),S=x[0],C=x[1],B=function(e,t){C(t),j(e),setTimeout((function(){j(null)}),5e3)};Object(a.useEffect)((function(){w.getAll().then((function(e){return u(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);g(t),w.setToken(t.token)}}),[]);var L=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.login(t);case 3:n=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(n)),w.setToken(n.token),g(n),B("Hello ".concat(n.name,"!"),"green"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),B("Wrong credentials","red");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.create(t);case 3:a=e.sent,B("Blog added successfully","green"),u(n.concat(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),B("Wrong input","red");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.update(t);case 3:a=e.sent,u(n.map((function(e){return e.id===t.id?a:e}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B("Something went wrong","red");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.remove(t);case 3:u(n.filter((function(e){return e.id!==t}))),B("Blog was deleted successfully","green"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B("Something went wrong","red");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(b,{message:O,color:S}),null!==p?r.a.createElement("div",null,r.a.createElement("h2",null,"blogs"),r.a.createElement("p",null,p.name," logged-in",r.a.createElement("button",{onClick:function(e){e.preventDefault(),window.localStorage.removeItem("loggedBlogappUser"),w.setToken(null),g(null)}},"logout")),r.a.createElement(v,{buttonLabel1:"new blog",buttonLabel2:"cancel"},r.a.createElement(m,{addBlog:T})),n.sort((function(e,t){return t.likes-e.likes})).map((function(e){return r.a.createElement(d,{key:e.id,blog:e,addLike:A,deleteBlog:I,isCreator:e.user&&e.user.username===p.username})}))):r.a.createElement(f,{logIn:L}))};c.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.ad42a8c6.chunk.js.map